/* 
 * angular-autodisable 0.0.1
 * http://github.com/kirstein/angular-autodisable
 * 
 * Licensed under the MIT license
 */
!function(a){"use strict";return a.module("ngAutodisable",[]).directive("ngAutodisable",["$parse",function(b){function c(b){return b&&a.isFunction(b.then)&&a.isFunction(b["finally"])}function d(a,b){var c=a[o];return c.splice(c.indexOf(b),1),a.$set(o,c),c}function e(a){var b=s++;return a.$set(o,(a[o]||[]).concat(b)),b}function f(a,b,c){(c||!d(a,b).length)&&(a.$set(n,c,!0),h(p))}function g(b,c,e){if(e||!d(b,c).length){var f=a.element(p).find("button[type=submit]");f.attr(n,!!e),h(f)}}function h(a){q&&a.toggleClass(q)}function i(a,b,c){m.disableFn(b,c,!0),a["finally"](function(){m.disableFn(b,c)})}function j(a,b,d){var f=d(a,{$event:m.EVENT});c(f)&&i(f,b,e(b))}function k(a,b,c,d){c.unbind(m.EVENT).bind(m.EVENT,function(){b.$apply(function(){a.forEach(j.bind(null,b,d))})})}var l={click:{EVENT:"click",attrName:"ngClick",disableFn:f},submit:{EVENT:"submit",attrName:"ngSubmit",disableFn:g}},m=l.click,n="disabled",o="ngAutodisable",p=null,q=!1,r="ngAutodisableClass",s=0;return{restrict:"A",compile:function(a,c){if(p=a,c.hasOwnProperty(r)&&(q=c[r]),c.hasOwnProperty("ngClick"))m=l.click;else{if(!c.hasOwnProperty("ngSubmit"))throw new Error("ngAutodisable requires ngClick or ngSubmit attribute in order to work");m=l.submit}var d=c[m.attrName].split(";").map(function(a){return b(a,null,!0)});return k.bind(null,d)}}}])}(angular);